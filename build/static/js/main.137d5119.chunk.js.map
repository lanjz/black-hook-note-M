{"version":3,"sources":["utils/const.js","utils/fetch/fetch.js","store/reducers/notes.js","store/configureStore.js","page/note/components/NoteDes.js","components/Header.js","utils/blackHook.js","page/note/components/NoteBriefUI.js","page/note/components/CatalogsUI.js","page/note/components/BooksUI.js","page/note/NoteUI.js","page/note/Note.js","page/catalog/Catalog.js","page/login/LoginUI.js","page/login/Login.js","App.js","serviceWorker.js","index.js","store/reducers/books.js","store/const/mutaions.js","store/reducers/catalogs.js","store/reducers/index.js","store/reducers/user.js","utils/hide/webSecret.js","store/reducers sync nonrecursive /.js$"],"names":["__webpack_exports__","recentlyArticlesKey","recentlyNoteKey","process","axios__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","axios__WEBPACK_IMPORTED_MODULE_0___default","n","_hide_webSecret__WEBPACK_IMPORTED_MODULE_1__","isDev","axios","defaults","withCredentials","MOCK","onUploadProgress","p","doFetchData","options","res","err","data","Promise","resolve","url","Error","concat","SET","base","mockHost","devHost","client","method","onDownloadProgress","toLowerCase","params","type","headers","Content-Type","formData","FormData","Object","keys","forEach","value","append","fetchData","then","response","msg","result","arguments","length","undefined","retCode","notAlert","window","location","href","retMsg","dealRetCode","title","message","showCancel","alert","catch","defaultState","list","curNote","notesMap","curNoteContent","NOTES_GET","arg","_ref2","D_Project_Demo_black_hook_note_M_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","D_Project_Demo_black_hook_note_M_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","dispatch","getState","_arg$limit","limit","_arg$start","start","_arg$force","force","rootState","state","bookId","catalogId","key","wrap","_context","prev","next","notes","books","curBook","catalogs","curCatalog","abrupt","fetch","indexOf","sent","MUTATIONS","payload","stop","_x","_x2","apply","this","NOTE_DES_GET","_ref3","_callee2","id","_arg$force2","_context2","_x3","_x4","NOTE_GET_BY_ID","_ref4","_callee3","reject","_context3","console","log","extend","user","_x5","_x6","NOTES_RECENTLY_GET","_ref5","_callee4","_arg$force3","_context4","constKey","_x7","_x8","NOTE_CUR_UPDATE","_ref6","_callee5","_context5","_x9","_ref","JSON","parse","stringify","item","_id","D_Project_Demo_black_hook_note_M_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_3__","D_Project_Demo_black_hook_note_M_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__","store","navigator","platform","applyMiddleware","thunkmiddleware","createStore","reducer","renderer","marked","Renderer","setOptions","gfm","tables","breaks","pedantic","sanitize","smartLists","smartypants","highlight","code","hljs","highlightAuto","NoteDes","props","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","text","MarkdownResult","__html","content","replace","react_default","createElement","className","dangerouslySetInnerHTML","React","Component","Header","_this","openCom","e","stopPropagation","ref","toggleContainer","onClick","bind","createBrowserHistory","baseTimestampToTime","stamps","format","fmt","getDate","Date","o","M+","getMonth","D+","h+","getHours","m+","getMinutes","s+","getSeconds","q+","Math","floor","S","getMilliseconds","k","test","RegExp","$1","getFullYear","substr","timestampToBriefTime","substring","NoteBriefUI","getBookName","bookList","name","gotoNote","_this2","_this$props","map","index","createTime","updateTime","TreeItem","actCatalog","curNode","chooseCatalog","_props$treeChainList","treeChainList","icon","hasChild","childNodes","assign","CatalogUI","catalogList","CATALOGS_GET","setCatalogsChainList","chain","push","curId","parentId","setState","_this3","BooksUI","chooseBook","BOOK_LIST_GET","values","NoteUI","onClickOutsideHandler","event","current","contains","target","openBrief","openBook","openCatalogs","noData","closeCom","defineProperty","gotoNoteFromNote","_this$props$match$par","match","noteId","history","gotoNoteFromCatalogs","asyncToGenerator","regenerator_default","gotoNoteFromBooks","BOOK_CUR_UPDATE","createRef","addEventListener","init","removeEventListener","_this$props$match$par2","CATALOGS_CUR_SAVE","components_Header","components_NoteDes","components_NoteBriefUI","CatalogsUI","components_BooksUI","connectMid","connect","objectSpread","CatalogPageUI","showPage","getCatalogId","getData","getNotes","LoginUI","handleInputChange","checked","todoLogin","username","password","login","searchSplit","search","slice","split","itemSplit","getQuery","back","errMsg","src","onChange","App","react_router_dom","react_router","path","component","Note","Catalog","Login","to","Boolean","hostname","ReactDOM","render","es","src_App","document","getElementById","serviceWorker","ready","registration","unregister","defaultBook","default","_ref$type","_ref$payload","newMap","d","BOOK_LIST_SAVE","BOOK_LIST_UPDATE","CATALOGS_SAVE","CATALOGS_TEMPLATE_CREATE","CATALOGS_OPEN_TOGGLE","CATALOGS_OPEN_RESET","USER_SAVE","CUR_USER_INFO_SAVE","CUR_USER_LAYOUT_SAVE","NOTE_LIST_SAVE","NOTE_MAP_SAVE","NOTE_CUR_CONTENT_UPDATE","root","isOpen","_params$force","D_Project_Demo_black_hook_note_M_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_4__","D_Project_Demo_black_hook_note_M_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__","getTime","newDir","isNew","getCatalog","addCatalog","D_Project_Demo_black_hook_note_M_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__","findInd","splice","r","redux__WEBPACK_IMPORTED_MODULE_0__","files","require","modules","combineReducers","userInfo","curUserInfo","userInfoStatus","USER_INFO_GET","D_Project_Demo_black_hook_note_M_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__","info","HOST","obj","proHost","./books.js","./catalogs.js","./index.js","./notes.js","./user.js","webpackContext","req","webpackContextResolve","module","exports"],"mappings":"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","file":"static/js/main.137d5119.chunk.js","sourcesContent":["export default {\r\n  recentlyArticlesKey: 'recently',\r\n  recentlyNoteKey: 'recently',\r\n}\r\n","import axios from 'axios'\nimport SET from '../hide/webSecret'\nconst isDev = process.env.NODE_ENV === 'development'\naxios.defaults.withCredentials = isDev ? false : true\nfunction helloAlert(msg) { alert(msg.title) }\n\nconst { MOCK } = process.env\nfunction dealRetCode(response = {}) {\n  const res = { err: null, data: response.data }\n  if (response.retCode === 4) {\n    res.notAlert = true\n    res.err = new Error('未登录')\n  \twindow.location.href = '/login?back=1'\n    return res\n  }\n  if (response.retCode !== 1) {\n    res.err = new Error(response.retMsg)\n  }\n  return res\n}\nfunction onUploadProgress(p) {\n}\nfunction fetchData(options) {\n  const res = { err: null, data: '' }\n  let { url } = options\n  if (!url) {\n    res.err = new Error('没有请求地址')\n    return res\n  }\n  if (MOCK) {\n    url = `${SET.base.mockHost}/mock/15${url}`\n  } else {\n    url = isDev ?\n      `http://${SET.base.devHost}${url}` :\n      process.client ? `${url}`: `http://127.0.0.1:3001${url}`\n  }\n  options.url = url\n  options.method = options.method || 'get'\n  options.onUploadProgress = onUploadProgress\n  options.onDownloadProgress = onUploadProgress\n  if (options.method.toLowerCase() === 'get') {\n    options.params = options.data\n  }\n  if (options.type === 'formData') {\n    options.headers = { 'Content-Type': 'multipart/form-data' }\n    const formData = new FormData();\n    const forDataKeys = Object.keys(options.data)\n    forDataKeys.forEach((value) => {\n      formData.append(value, options.data[value]);\n    })\n    options.data = formData\n  }\n  return axios(options)\n}\n\nconst doFetchData = function (options) {\n  const res = { err: null, data: '' }\n  return new Promise((resolve) => {\n    fetchData(options)\n      .then((response) => {\n        const result = dealRetCode(response.data)\n        if(result.err) {\n          res.err = result.err\n          if(!result.notAlert && !options.notAlert) {\n            helloAlert({\n              title: res.err.message,\n              showCancel: false\n            })\n          }\n          resolve(res)\n          return\n        }\n        res.data = result.data\n        resolve(res)\n      })\n      .catch((err) => {\n        resolve({ err, data: '' })\n      })\n  })\n}\n\nconst uploadFile = function (params) {\n  const options = {\n    data: params,\n    type: 'formData',\n    method: 'post',\n    url: '/api/uploadImg'\n  }\n  return doFetchData(options)\n}\n\nexport default doFetchData\n\nexport {\n  fetchData,\n  uploadFile\n}\n","import fetch from '../../utils/fetch/fetch.js'\r\nimport constKey from '../../utils/const.js'\r\nimport * as MUTATIONS from \"../const/mutaions\";\r\n\r\nconst defaultState = {\r\n\tlist: {},\r\n\tcurNote: \"\",\r\n\tnotesMap: {},\r\n\tcurNoteContent: {},\r\n}\r\n\r\nexport default (state = defaultState,  { type, payload }) => {\r\n\tif(type === MUTATIONS.NOTE_LIST_SAVE) {\r\n\t\tconst  { data, start, key } = payload\r\n\t\tconst notesMap = JSON.parse(JSON.stringify(state.notesMap))\r\n\t\tdata.forEach(item => {\r\n\t\t\tnotesMap[item._id] = item\r\n\t\t})\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tlist: {\r\n\t\t\t\t...state.list,\r\n\t\t\t\t[key]: data\r\n\t\t\t},\r\n\t\t\tnotesMap\r\n\t\t}\r\n\t}\r\n\tif(type === MUTATIONS.NOTE_CUR_UPDATE) {\r\n\t\tconst data = payload\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tcurNote: data\r\n\t\t}\r\n\t}\r\n\tif(type === MUTATIONS.NOTE_MAP_SAVE) {\r\n\t\tconst { data, id } = payload\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tnotesMap: {\r\n\t\t\t\t...state.notesMap,\r\n\t\t\t\t[id]: data\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif(type === MUTATIONS.NOTE_CUR_CONTENT_UPDATE) {\r\n\t\tconst data = payload\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tcurNoteContent: data\r\n\t\t}\r\n\t}\r\n\treturn state\r\n}\r\n\r\nexport function NOTES_GET(arg = {}) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst { limit = 0, start = 0, force = false } = arg\r\n\t\tconst rootState = getState()\r\n\t\tconst state = rootState.notes\r\n\t\tconst bookId = rootState.books.curBook\r\n\t\tconst catalogId = rootState.catalogs.curCatalog\r\n\t\tconst key = `${bookId}_${catalogId}`\r\n\t\tif(!force && state.list[key]){\r\n\t\t\treturn { err: null, data: { list: state.list[key] } }\r\n\t\t}\r\n\t\t\r\n\t\tconst result = await fetch({\r\n\t\t\turl: '/api/notes',\r\n\t\t\tdata: {\r\n\t\t\t\tlimit,\r\n\t\t\t\tstart,\r\n\t\t\t\tbookId,\r\n\t\t\t\tcatalogId: catalogId.indexOf('root') > -1 ? 'root' : catalogId\r\n\t\t\t}\r\n\t\t})\r\n\t\tconst { err, data } = result\r\n\t\tif(!err) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: MUTATIONS.NOTE_LIST_SAVE,\r\n\t\t\t\tpayload: { data: data.list, start, key }\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn result\r\n\t}\r\n}\r\n\r\n\r\nexport function NOTE_DES_GET(arg = {}) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst { id, force = false } = arg\r\n\t\tconst rootState = getState()\r\n\t\tconst state = rootState.notes\r\n\t\tif(!force && state.notesMap[id]){\r\n\t\t\treturn { err: null, data: state.notesMap[id] }\r\n\t\t}\r\n\t\tconst result = await fetch({\r\n\t\t\turl: `/api/note/${id}`,\r\n\t\t})\r\n\t\tconst { err, data } = result\r\n\t\tif(!err) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: MUTATIONS.NOTE_MAP_SAVE,\r\n\t\t\t\tpayload: { data, id }\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn result\r\n\t}\r\n}\r\n\r\nexport function NOTE_GET_BY_ID(arg = {}) {\r\n\treturn (dispatch, getState) => new Promise(async (resolve, reject) => {\r\n\t\tconst { id, bookId, catalogId } = arg\r\n\t\tconst key = `${bookId}_${catalogId}`\r\n\t\tconst rootState = getState()\r\n\t\tconst state = rootState.notes\r\n\t\tconsole.log('state', state)\r\n\t\tif(state.list[key]){\r\n\t\t\tresolve ({ err: null, data: { list: state.list[key] }})\r\n\t\t}\r\n\t\tconst result = await fetch({\r\n\t\t\turl: `/api/notes/${id}`,\r\n\t\t\tdata: {\r\n\t\t\t\tbookId,\r\n\t\t\t\tcatalogId\r\n\t\t\t}\r\n\t\t})\r\n\t\tconst { err, data } = result\r\n\t\tif(!err) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: MUTATIONS.NOTE_LIST_SAVE,\r\n\t\t\t\tpayload: { data: data.list, start: 0, key }\r\n\t\t\t})\r\n\t\t\tif(data.extend && data.extend.user) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: MUTATIONS.CUR_USER_INFO_SAVE,\r\n\t\t\t\t\tpayload: data.extend.user\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tif(data.extend && data.extend.books) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: MUTATIONS.BOOK_LIST_SAVE,\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\tdata: data.extend.books,\r\n\t\t\t\t\t\tstart: 0\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\tresolve(result)\r\n\t})\r\n}\r\n\r\nexport function NOTES_RECENTLY_GET(arg = {}) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst { force = false } = arg\r\n\t\tconst rootState = getState()\r\n\t\tconst state = rootState.notes\r\n\t\tconst key = rootState.books.curBook+'_'+constKey.recentlyNoteKey\r\n\t\tif(!force && state.list[key]){\r\n\t\t\treturn { err: null, data: { list: state.list[key] } }\r\n\t\t}\r\n\t\tconst result = await fetch({\r\n\t\t\turl: '/api/recently_notes',\r\n\t\t\tmethod: 'get',\r\n\t\t\tdata: {\r\n\t\t\t\tbookId: rootState.books.curBook\r\n\t\t\t}\r\n\t\t})\r\n\t\tconst { err, data } = result\r\n\t\tif(!err) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: MUTATIONS.NOTE_LIST_SAVE,\r\n\t\t\t\tpayload: { data, key }\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn { err: null, data: { list: data } }\r\n\t}\r\n}\r\n\r\nexport function NOTE_CUR_UPDATE(data) {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: MUTATIONS.NOTE_CUR_UPDATE,\r\n\t\t\tpayload: data\r\n\t\t})\r\n\t}\r\n}\r\n\r\n","import { createStore, compose, applyMiddleware } from 'redux'\r\nimport thunkmiddleware from 'redux-thunk'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport reducer from './reducers/index'\r\n\r\n// const devTools = require('remote-redux-devtools').default\r\nconst isPC = navigator.platform.indexOf('Win32')!=-1\r\nconst composeArr = [applyMiddleware(thunkmiddleware)]\r\n/*if(isPC) {\r\n\tcomposeArr.push(composeWithDevTools())\r\n}*/\r\n\r\nlet store\r\nif (process.env.NODE_ENV === 'development') {\r\n\tstore = createStore(\r\n\t\treducer,\r\n\t\tcompose(\r\n\t\t\t...composeArr\r\n\t\t/*\tdevTools({\r\n\t\t\t\thostname: 'localhost',\r\n\t\t\t\tport: 5678,\r\n\t\t\t\tsecure: false\r\n\t\t\t})*/\r\n\t\t)\r\n\t)\r\n} else {\r\n\tstore = createStore(reducer, applyMiddleware(thunkmiddleware))\r\n}\r\n\r\nexport default store\r\n","import React from 'react'\r\nimport marked from 'marked'\r\nimport hljs from 'highlight.js'\r\n\r\nconst renderer = new marked.Renderer()\r\nmarked.setOptions({\r\n\trenderer,\r\n\tgfm: true,\r\n\ttables: true,\r\n\tbreaks: false,\r\n\tpedantic: false,\r\n\tsanitize: false,\r\n\tsmartLists: true,\r\n\tsmartypants: false,\r\n\thighlight: function (code) {\r\n\t\treturn hljs.highlightAuto(code).value;\r\n\t}\r\n});\r\n\r\nfunction DIYMarked(text) {\r\n\tconst result = text\r\n\t\t.replace(/C\\(N\\)/g, '<span class=\"marked-checkBox\"></span>')\r\n\t\t.replace(/C\\(Y\\)/g, '<span class=\"marked-checkBox\"><i class=\"iconfont icon-gou1\"></i></span>')\r\n\treturn result\r\n}\r\n\r\n\r\nclass NoteDes extends React.Component{\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t}\r\n\trender() {\r\n\t\tconst MarkdownResult = {\r\n\t\t\t__html: DIYMarked(marked(this.props.curNote.content))\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div  className=\"markdown-title\">{this.props.curNote.title}</div>\r\n\t\t\t\t<div className=\"layout-padding\">\r\n\t\t\t\t\t<div className=\"markdown-style\" >\r\n\t\t\t\t\t\t<div dangerouslySetInnerHTML={MarkdownResult}></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default NoteDes\r\n","import React from 'react'\r\nimport './assets/header.less'\r\nclass Header extends React.Component{\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t}\r\n\topenCom = (arg, e) => {\r\n\t\tthis.props.openCom(arg)\r\n\t\te.stopPropagation()\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"header-layout  flex align-items-center layout-padding\" ref={this.toggleContainer}>\r\n\t\t\t\t<div className=\"icon-layout\">\r\n\t\t\t\t\t<i className=\"iconfont icon-shuji\" onClick={this.openCom.bind(this, 'openBook')}></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"icon-layout\" onClick={this.openCom.bind(this, 'openCatalogs')}>\r\n\t\t\t\t\t<i className=\"iconfont icon-neirong\" ></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"icon-layout\" onClick={this.openCom.bind(this, 'openBrief')}>\r\n\t\t\t\t\t<i className=\"iconfont icon-shujia1\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"logo\">Black Hook Note</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Header\r\n","import { createBrowserHistory } from 'history'\r\n// console.log('history', history)\r\nexport const RouterHistory = createBrowserHistory()\r\n\r\nfunction baseTimestampToTime(stamps, format) {\r\n\tif(!stamps){\r\n\t\treturn ''\r\n\t}\r\n\tlet fmt=format?format:\"YYYY-MM-DD hh:mm:ss\"\r\n//                var getDate=stamps==''||!stamps?new Date():new Date(stamps)\r\n\tconst getDate=new Date(stamps * 1);\r\n\tconst o = {\r\n\t\t\"M+\": getDate.getMonth() + 1, //月份\r\n\t\t\"D+\": getDate.getDate(), //日\r\n\t\t\"h+\": getDate.getHours(), //小时\r\n\t\t\"m+\": getDate.getMinutes(), //分\r\n\t\t\"s+\": getDate.getSeconds(), //秒\r\n\t\t\"q+\": Math.floor((getDate.getMonth() + 3) / 3), //季度\r\n\t\t\"S\": getDate.getMilliseconds() //毫秒\r\n\t};\r\n\tif (/(Y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (getDate.getFullYear() + \"\").substr(4 - RegExp.$1.length));\r\n\tfor (let k in o)\r\n\t\tif (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n\treturn fmt;\r\n}\r\n\r\nexport function timestampToTime(stamps, format) {\r\n\treturn baseTimestampToTime(stamps, format)\r\n}\r\nexport function timestampToBriefTime(stamps, format) {\r\n\tconst getDate =  baseTimestampToTime(stamps, 'YYYY.MM.DD')\r\n\treturn getDate ? getDate.substring(2) : ''\r\n}\r\n\r\nexport function getQuery(key) {\r\n\tif(!window) return ''\r\n\tconst search = window.location.search.slice(1)\r\n\tconst searchSplit = search.split('&')\r\n\tif(!searchSplit.length) return ''\r\n\tconst data = {}\r\n\tsearchSplit.forEach(item => {\r\n\t\tconst itemSplit = item.split('=')\r\n\t\tdata[itemSplit[0]] = itemSplit[1]\r\n\t})\r\n\treturn key ? data[key] : data\r\n\t\r\n}\r\n","import React from 'react'\r\nimport { timestampToBriefTime } from '../../../utils/blackHook'\r\nclass NoteBriefUI extends React.Component{\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t}\r\n\tcomponentDidMount() {\r\n\t}\r\n\tgetBookName = (id, bookList) => {\r\n\t\treturn bookList[id] ? bookList[id].name : ''\r\n\t}\r\n\tgotoNote = (item) => {\r\n\t\tthis.props.gotoNote(item)\r\n\t}\r\n\trender() {\r\n\t\tconst { books, catalogs } = this.props\r\n\t\tconst list = this.props.notes.list[`${books.curBook}_${catalogs.curCatalog}`]\r\n\t\tconst curNote = this.props.notes.curNote\r\n\t\treturn (\r\n\t\t\t<div className=\"layout-padding note-brief-layout\">\r\n\t\t\t\t<div className=\"note-layout-input-box align-items-center\">\r\n\t\t\t\t\t<input type=\"text\" className=\"note-layout-input\"/>\r\n\t\t\t\t\t<i className=\"iconfont icon-sousuo\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"flex-1 relative\">\r\n\t\t\t\t\t<div className=\"absolute-full article-item-box\" id=\"article-item-box\">\r\n\t\t\t\t\t\t{books&&list&&list.map((item, index) => (\r\n\t\t\t\t\t\t\t<div className={ item._id === curNote ? \"note-item act\" : \"note-item\"} key={index} onClick={this.gotoNote.bind(this, item)}>\r\n\t\t\t\t\t\t\t\t<div className=\"note-item-title\">{item.title}</div>\r\n\t\t\t\t\t\t\t\t<div className=\"note-label\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"note-label-item\">{this.getBookName(item.bookId, books.list)}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"note-item-mark\">{timestampToBriefTime(item.createTime)}~{timestampToBriefTime(item.updateTime)}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default NoteBriefUI\r\n","import React from 'react'\r\nimport constKey from '../../../utils/const.js'\r\n\r\nfunction TreeItem(props) {\r\n\tconst { actCatalog, curNode, chooseCatalog, catalogs, treeChainList = []} = props\r\n\treturn (\r\n\t\t<div className=\"catalogs-layout\">\r\n\t\t\t<div\r\n\t\t\t\tclassName={actCatalog === curNode['_id'] ?\r\n\t\t\t\t\t\"flex align-items-center catalogs-item-layout act\" : 'flex align-items-center catalogs-item-layout'}\r\n\t\t\t\tonClick={chooseCatalog.bind(this, curNode)}\r\n\t\t\t>\r\n\t\t\t\t{curNode.icon ? <i className={\"iconfont \" + curNode.icon}></i> :\r\n\t\t\t\t\ttreeChainList&&treeChainList.indexOf(curNode['_id']) > -1 ?\r\n\t\t\t\t\t\t<i className=\"iconfont icon-wenjianjia\"></i> :\r\n\t\t\t\t\t\t<i className=\"iconfont icon-wendang1\"></i>\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t<div className=\"catalogs-name line-ellipsis\">{curNode.name}</div>\r\n\t\t\t</div>\r\n\t\t\t{(curNode.hasChild && catalogs[curNode['_id']]&&catalogs[curNode['_id']].childNodes.length) ?\r\n\t\t\tcatalogs[curNode['_id']].childNodes.map((item, index) => (\r\n\t\t\t\t<TreeItem {...props} curNode={item} key={index}></TreeItem>\r\n\t\t\t)) : null\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nclass CatalogUI extends React.Component{\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tcatalogList: [\r\n\t\t\t\t{  _id: constKey.recentlyArticlesKey, name: '最近文档', hasChild: false, icon: 'icon-wendang' },\r\n\t\t\t\t{ _id: props.books.curBook+'_root', name: '我的文件夹', hasChild: true },\r\n\t\t\t],\r\n\t\t\ttreeChainList: []\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tthis.props.CATALOGS_GET()\r\n\t\t\t.then(res => {\r\n\t\t\t\tif(!res.err) {\r\n\t\t\t\t\tthis.setCatalogsChainList()\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\r\n\t}\r\n\tsetCatalogsChainList() {\r\n\t\tconst { catalogs } = this.props\r\n\t\tconst chain = []\r\n\t\tchain.push(catalogs.curCatalog)\r\n\t\tlet curId = catalogs.curCatalog\r\n\t\twhile (catalogs.list&&catalogs.list[curId]&&catalogs.list[curId].parentId) {\r\n\t\t\tcurId = catalogs.list[curId].parentId\r\n\t\t\tchain.push(curId)\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\ttreeChainList: chain\r\n\t\t})\r\n\t}\r\n\tchooseCatalog = (item) => {\r\n\t\tthis.props.gotoNote(item)\r\n\t}\r\n\trender() {\r\n\t\tconst { books, catalogs } = this.props\r\n\t\treturn (\r\n\t\t\t<div className=\"layout-padding note-brief-layout\">\r\n\t\t\t\t{this.state.catalogList.map((item, index) => (\r\n\t\t\t\t\t<TreeItem\r\n\t\t\t\t\t\tcurNode={item}\r\n\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\tchooseCatalog={this.chooseCatalog}\r\n\t\t\t\t\t\tactCatalog={catalogs.curCatalog}\r\n\t\t\t\t\t\tcatalogs={catalogs.list}\r\n\t\t\t\t\t\ttreeChainList={this.state.treeChainList}\r\n\t\t\t\t\t></TreeItem>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default CatalogUI\r\n","import React from 'react'\r\n\r\nclass BooksUI extends React.Component{\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tthis.props.BOOK_LIST_GET()\r\n\t}\r\n\tchooseBook = (item) => {\r\n\t\tthis.props.gotoNote(item)\r\n\t}\r\n\trender() {\r\n\t\tconst { books } = this.props\r\n\t\tconst list = Object.values(books.list)\r\n\t\treturn (\r\n\t\t\t<div className=\"layout-padding note-brief-layout\">\r\n\t\t\t\t{list&&list.length&&list.map((item, index) => (\r\n\t\t\t\t\t<div className=\"catalogs-layout\" key={index}>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={books.curBook === item['_id'] ?\r\n\t\t\t\t\t\t\t\t\"flex align-items-center catalogs-item-layout act\" : 'flex align-items-center catalogs-item-layout'}\r\n\t\t\t\t\t\t\tonClick={this.chooseBook.bind(this, item)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<i className=\"iconfont icon-shuji\"></i>\r\n\t\t\t\t\t\t\t<div className=\"catalogs-name line-ellipsis\">{item.name}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default BooksUI\r\n","import React from 'react'\r\nimport NoteDes from './components/NoteDes'\r\nimport Header from \"../../components/Header\";\r\nimport NoteBriefUI from '../note/components/NoteBriefUI'\r\nimport CatalogsUI from '../note/components/CatalogsUI'\r\nimport BooksUI from '../note/components/BooksUI'\r\nimport constKey from \"../../utils/const\";\r\n\r\nclass NoteUI extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\topenBrief: false,\r\n\t\t\topenBook: false,\r\n\t\t\topenCatalogs: false,\r\n\t\t}\r\n\t\tthis.toggleContainer = React.createRef();\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\twindow.addEventListener('click', this.onClickOutsideHandler);\r\n\t\tthis.init()\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\twindow.removeEventListener('click', this.onClickOutsideHandler);\r\n\t}\r\n\t\r\n\tonClickOutsideHandler = (event) => {\r\n\t\tconsole.log('!this.toggleContainer.current.contains(event.target)', !this.toggleContainer.current.contains(event.target))\r\n\t\tif((this.state.openBrief || this.state.openBook || this.state.openCatalogs)\r\n\t\t\t&& !this.toggleContainer.current.contains(event.target)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\topenBrief: false,\r\n\t\t\t\topenBook: false,\r\n\t\t\t\topenCatalogs: false,\r\n\t\t\t\tnoData: false\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tcloseCom = () => {\r\n\t\tthis.setState({\r\n\t\t\topenBrief: false,\r\n\t\t\topenBook: false,\r\n\t\t\topenCatalogs: false,\r\n\t\t});\r\n\t}\r\n\topenCom = (arg) => {\r\n\t\tthis.closeCom()\r\n\t\tthis.setState({\r\n\t\t\t[arg]: true\r\n\t\t})\r\n\t}\r\n\t\r\n\tinit() {\r\n\t\tconst { bookId, catalogId, noteId } = this.props.match.params\r\n\t\tif(noteId === 'none') {\r\n\t\t\tthis.setState(\r\n\t\t\t\t{\r\n\t\t\t\t\tnoData: true\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.props.BOOK_CUR_UPDATE(bookId)\r\n\t\tthis.props.CATALOGS_CUR_SAVE(catalogId)\r\n\t\tthis.props.NOTE_CUR_UPDATE(noteId)\r\n\t\tif(this.props.notes.list[`${bookId}_${catalogId}`]) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.props.NOTE_GET_BY_ID({ id: noteId, bookId, catalogId })\r\n\t}\r\n\t\r\n\tgotoNoteFromNote = (item) => {\r\n\t\tconst { bookId, catalogId, noteId } = this.props.match.params\r\n\t\tthis.props.history.push(`/${bookId}/${catalogId}/${item._id}`)\r\n\t\tthis.props.NOTE_CUR_UPDATE(item._id)\r\n\t\tthis.closeCom()\r\n\t}\r\n\tgotoNoteFromCatalogs = async (item) => {\r\n\t\tconst { catalogs } = this.props\r\n\t\tconst { bookId } = this.props.match.params\r\n\t\tthis.closeCom()\r\n\t\tif(catalogs.curCatalog === item._id) return\r\n\t\tthis.props.history.push(`/${bookId}/${item._id}`)\r\n\t}\r\n\tgotoNoteFromBooks = (item) => {\r\n\t\tconst { bookId } = this.props.match.params\r\n\t\tthis.closeCom()\r\n\t\tif(bookId === item._id) return\r\n\t\tthis.props.BOOK_CUR_UPDATE(item._id)\r\n\t\tthis.props.history.push(`/${item._id}/${constKey.recentlyNoteKey }`)\r\n\t\t\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst curNote = this.props.notes.curNote ? this.props.notes.notesMap[this.props.notes.curNote] : ''\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Header openCom={this.openCom}></Header>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.noData ?\r\n\t\t\t\t\t\t<div className=\"no-data flex direction-column justify-content-center align-items-center absolute-full\">\r\n\t\t\t\t\t\t\t<i className=\"iconfont icon-wushuju\"></i>\r\n\t\t\t\t\t\t\t<div>还没任何有笔记</div>\r\n\t\t\t\t\t\t</div> :\r\n\t\t\t\t\t\t<div className=\"main-content\">\r\n\t\t\t\t\t\t\t{curNote && <NoteDes curNote={curNote}></NoteDes>}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<div ref={this.toggleContainer}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{this.state.openBrief &&\r\n\t\t\t\t\t\t<NoteBriefUI {...this.props} gotoNote={this.gotoNoteFromNote}></NoteBriefUI>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{this.state.openCatalogs &&\r\n\t\t\t\t\t\t<CatalogsUI {...this.props} gotoNote={this.gotoNoteFromCatalogs}></CatalogsUI>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{this.state.openBook &&\r\n\t\t\t\t\t\t<BooksUI {...this.props} gotoNote={this.gotoNoteFromBooks}></BooksUI>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\r\n\t\t\t</div>\r\n\t\t\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default NoteUI\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport NoteUI from './NoteUI'\r\nimport {\r\n\tNOTES_GET,\r\n\tNOTE_DES_GET,\r\n\tNOTE_GET_BY_ID,\r\n\tNOTES_RECENTLY_GET,\r\n\tNOTE_CUR_UPDATE\r\n} from '../../store/reducers/notes'\r\nimport { CATALOGS_CUR_SAVE, CATALOGS_GET } from '../../store/reducers/catalogs'\r\nimport { BOOK_CUR_UPDATE, BOOK_LIST_GET } from '../../store/reducers/books'\r\n\r\nconst mapStateToProps = state => ({\r\n\tnotes: {\r\n\t\t...state.notes\r\n\t},\r\n\tcatalogs: {\r\n\t\t...state.catalogs\r\n\t},\r\n\tbooks: {\r\n\t\t...state.books\r\n\t}\r\n})\r\nconst mapDispatchToProps = dispatch => ({\r\n\tNOTES_GET(arg) {\r\n\t\treturn dispatch(NOTES_GET(arg))\r\n\t},\r\n\tNOTE_DES_GET(arg) {\r\n\t\treturn dispatch(NOTE_DES_GET(arg))\r\n\t},\r\n\tNOTE_GET_BY_ID(arg) {\r\n\t\treturn dispatch(NOTE_GET_BY_ID(arg))\r\n\t},\r\n\tNOTES_RECENTLY_GET(arg) {\r\n\t\treturn dispatch(NOTES_RECENTLY_GET(arg))\r\n\t},\r\n\tNOTE_CUR_UPDATE(arg) {\r\n\t\treturn dispatch(NOTE_CUR_UPDATE(arg))\r\n\t},\r\n\tCATALOGS_CUR_SAVE(arg) {\r\n\t\treturn dispatch(CATALOGS_CUR_SAVE(arg))\r\n\t},\r\n\tBOOK_CUR_UPDATE(arg) {\r\n\t\treturn dispatch(BOOK_CUR_UPDATE(arg))\r\n\t},\r\n\tCATALOGS_GET(arg){\r\n\t\treturn dispatch(CATALOGS_GET(arg))\r\n\t},\r\n\tBOOK_LIST_GET(arg){\r\n\t\treturn dispatch(BOOK_LIST_GET(arg))\r\n\t}\r\n})\r\n\r\nexport const connectMid = connect(mapStateToProps, mapDispatchToProps)\r\nexport default connectMid(NoteUI)\r\n","import { connectMid } from '../note/Note'\r\nimport React from \"react\";\r\nimport constKey from \"../../utils/const\";\r\n\r\nclass CatalogPageUI extends React.Component{\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tshowPage: false,\r\n\t\t};\r\n\t}\r\n\tasync componentDidMount() {\r\n\t\tconst { bookId, catalogId } = this.props.match.params\r\n\t\tthis.props.CATALOGS_CUR_SAVE(catalogId)\r\n\t\tconst getCatalogId = catalogId.indexOf('root') > -1 ? 'root' : catalogId\r\n\t\tconst getData = catalogId === constKey.recentlyNoteKey ? this.props.NOTES_RECENTLY_GET : this.props.NOTES_GET\r\n\t\tconst getNotes = this.props.notes[`${bookId}_${getCatalogId}`] || await getData()\r\n\t\tconst { err, data } = getNotes\r\n\t\tif(!err) {\r\n\t\t\tif(data.list && data.list.length) {\r\n\t\t\t\tconst noteId = data.list[0]._id\r\n\t\t\t\tthis.props.history.push(`/${bookId}/${catalogId}/${noteId}`)\r\n\t\t\t} else {\r\n\t\t\t\tthis.props.history.push(`/${bookId}/${catalogId}/none`)\r\n\t\t\t}\r\n\t\t} else{\r\n\t\t\tthis.setState({\r\n\t\t\t\tshowPage: true\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>{this.state.showPage &&'发生了未知错误'}</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default connectMid(CatalogPageUI)\r\n","import React from 'react'\r\nimport { getQuery } from '../../utils/blackHook'\r\n\r\n\r\nclass LoginUI extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tusername: '',\r\n\t\t\tpassword: '',\r\n\t\t\terrMsg: '',\r\n\t\t}\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tconsole.log('this.pros', this.props)\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t}\r\n\t\r\n\thandleInputChange = (event) => {\r\n\t\tconst target = event.target;\r\n\t\tconst value = target.type === 'checkbox' ? target.checked : target.value;\r\n\t\tconst name = target.name;\r\n\t\tthis.setState({\r\n\t\t\t[name]: value\r\n\t\t});\r\n\t}\r\n\ttodoLogin = () => {\r\n\t\tif(!this.state.username || !this.state.password) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.props.login({\r\n\t\t\tusername: this.state.username,\r\n\t\t\tpassword: this.state.password\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tif(res.err) {\r\n\t\t\t\t\talert(res.err.message)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(getQuery('back')) {\r\n\t\t\t\t\t\twindow.history.back()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twindow.location = ''\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"login-bg\">\r\n\t\t\t\t<div className=\"avatar-layout flex-all-center\">\r\n\t\t\t\t\t<img src=\"http://s2.sinaimg.cn/mw690/006VYTdfzy7pano0kENd1&690\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"flex flex-1 form-bg bg-fff login-layout\">\r\n\t\t\t\t\t<div className=\"form-layout\">\r\n\t\t\t\t\t\t<div className=\"form-group flex\">\r\n\t\t\t\t\t\t\t<div className=\"form-label-layout\">\r\n\t\t\t\t\t\t\t\t用户名：\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"padding-input flex flex-1 align-items-center\">\r\n\t\t\t\t\t\t\t\t<input className=\"form-input\" type=\"text\" value={this.state.username} name=\"username\"\r\n\t\t\t\t\t\t\t\t\t   onChange={this.handleInputChange}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"form-group flex\">\r\n\t\t\t\t\t\t\t<div className=\"form-label-layout\">\r\n\t\t\t\t\t\t\t\t密码：\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"padding-input flex flex-1 align-items-center\">\r\n\t\t\t\t\t\t\t\t<input className=\"form-input\" type=\"text\" value={this.state.password} name=\"password\"\r\n\t\t\t\t\t\t\t\t\t   onChange={this.handleInputChange}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"form-group login-btn-layout\">\r\n\t\t\t\t\t\t\t<div className={(!this.state.username || !this.state.password) ? \"login-btn disable\" : \"login-btn\"} onClick={this.todoLogin}>登录</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default LoginUI\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport LoginUI from './LoginUI'\r\n\r\nimport {\r\n\tlogin\r\n} from '../../store/reducers/user'\r\nconst mapStateToProps = state => ({\r\n\tuser: {\r\n\t\t...state.user\r\n\t}\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n\tlogin(arg) {\r\n\t\treturn dispatch(login(arg))\r\n\t},\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginUI)\r\n","import React from 'react';\nimport {\n\tBrowserRouter,\n\tRoute,\n\tSwitch,\n\tRedirect\n} from 'react-router-dom'\nimport './assets/global.less';\nimport './assets/app.less';\nimport './assets/components.less';\nimport Note from \"./page/note/Note\";\nimport Catalog from \"./page/catalog/Catalog\";\nimport Login from \"./page/login/Login\";\n\n\nfunction App() {\n\treturn (\n\t\t<div className=\"app\">\n\t\t\t<BrowserRouter>\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route path=\"/:bookId/:catalogId/:noteId\" component={Note}/>\n\t\t\t\t\t<Route path=\"/:bookId/:catalogId\" component={Catalog}/>\n\t\t\t\t\t<Route path=\"/login\" component={Login}/>\n\t\t\t\t\t<Redirect to=\"/default/recently\" />\n\t\t\t\t</Switch>\n\t\t\t</BrowserRouter>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport 'lib-flexible'\nimport store from './store/configureStore'\nimport App from './App'\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<App />\n\t</Provider>,\n\tdocument.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import fetch from '../../utils/fetch/fetch.js'\r\nimport constKey from '../../utils/const.js'\r\nimport * as MUTATIONS from '../const/mutaions'\r\n\r\nconst defaultBook = {\r\n\tdefault:{\r\n\t\t_id: 'default',\r\n\t\tname: '默认'\r\n\t}\r\n}\r\n\r\nconst defaultState = {\r\n\tlist: defaultBook,\r\n\tcurBook: 'default'\r\n}\r\n\r\nexport default (state = defaultState, { type = '', payload = {} }) => {\r\n\tif(type === MUTATIONS.BOOK_LIST_SAVE) {\r\n\t\tconst { data, start } = payload\r\n\t\tconst newMap = start ? state.list : { ...defaultBook }\r\n\t\tdata.forEach((item) => {\r\n\t\t\tnewMap[item._id] = item\r\n\t\t})\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tlist: newMap\r\n\t\t}\r\n\t}\r\n\tif(type === MUTATIONS.BOOK_LIST_UPDATE) {\r\n\t\tconst data = payload\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tlist: {\r\n\t\t\t\t...state.list,\r\n\t\t\t\t[data._id] : data\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif(type === MUTATIONS.BOOK_CUR_UPDATE) {\r\n\t\tconst data = payload\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tcurBook: data\r\n\t\t}\r\n\t}\r\n\treturn state\r\n}\r\n\r\nexport function BOOK_LIST_GET(arg = {}) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst rootState = getState()\r\n\t\tconst state = rootState.books\r\n\t\tconst { limit = 0, start = 0, force = false } = arg\r\n\t\tif(!force && Object.keys(state.list).length > 1){\r\n\t\t\treturn { err: null, data: { list: state.list } }\r\n\t\t}\r\n\t\tconst result = await fetch({\r\n\t\t\turl: '/api/books',\r\n\t\t\tdata: {\r\n\t\t\t\tlimit,\r\n\t\t\t\tstart\r\n\t\t\t}\r\n\t\t})\r\n\t\tconst { err, data } = result\r\n\t\tif(!err) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: MUTATIONS.BOOK_LIST_SAVE,\r\n\t\t\t\tpayload: { data: data.list, start }\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn result\r\n\t}\r\n}\r\n\r\nexport function BOOK_CUR_UPDATE(data) {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: MUTATIONS.BOOK_CUR_UPDATE,\r\n\t\t\tpayload: data\r\n\t\t})\r\n\t}\r\n}\r\n","export const BOOK_LIST_SAVE = 'BOOK_LIST_SAVE'\nexport const BOOK_LIST_UPDATE = 'BOOK_LIST_UPDATE'\nexport const BOOK_CUR_UPDATE = 'BOOK_CUR_UPDATE'\n\nexport const CATALOGS_SAVE = 'CATALOGS_SAVE'\nexport const CATALOGS_CUR_SAVE = 'CATALOGS_CUR_SAVE'\nexport const CATALOGS_TEMPLATE_CREATE = 'CATALOGS_TEMPLATE_CREATE'\nexport const CATALOGS_OPEN_TOGGLE = 'CATALOGS_OPEN_TOGGLE'\nexport const CATALOGS_OPEN_RESET = 'CATALOGS_OPEN_RESET'\n\n// schema\n\nexport const SCHEMA_LIST_SAVE = 'SCHEMA_LIST_SAVE'\nexport const SCHEMA_LIST_UPDATE = 'SCHEMA_LIST_UPDATE'\nexport const SCHEMA_CUR_SAVE = 'SCHEMA_CUR_SAVE'\n\nexport const ARTICLE_LIST_SAVE = 'ARTICLE_LIST_SAVE'\nexport const ARTICLE_DES_SAVE = 'ARTICLE_DES_SAVE'\nexport const ARTICLE_CUS_SAVE = 'ARTICLE_CUS_SAVE'\n\nexport const USER_SAVE = 'USER_SAVE'\nexport const ISVISITOR_SAVE = 'ISVISITOR_SAVE'\nexport const CUR_USER_INFO_SAVE = 'CUR_USER_INFO_SAVE'\nexport const CUR_USER_LAYOUT_SAVE = 'CUR_USER_LAYOUT_SAVE'\n\n// notes\n\nexport const NOTE_LIST_SAVE = 'NOTE_LIST_SAVE'\nexport const NOTE_LIST_UPDATE = 'NOTE_LIST_UPDATE'\nexport const NOTE_CUR_UPDATE = 'NOTE_CUR_UPDATE'\nexport const NOTE_MAP_SAVE = 'NOTE_MAP_SAVE'\nexport const NOTE_CUR_CONTENT_UPDATE = 'NOTE_CUR_CONTENT_UPDATE'\n\n// config\n\nexport const CONFIG_TOGGLE_SAVE = 'CONFIG_TOGGLE_SAVE'\n","import fetch from '../../utils/fetch/fetch.js'\r\nimport constKey from '../../utils/const.js'\r\nimport * as MUTATIONS from \"../const/mutaions\";\r\nconst defaultState = {\r\n\tlist: {\r\n\t\troot: {\r\n\t\t\t_id: 'root',\r\n\t\t\tparentId: '',\r\n\t\t\tbookId: 'default'\r\n\t\t}\r\n\t},\r\n\tcurCatalog: constKey.recentlyArticlesKey,\r\n\tisOpen: []\r\n}\r\n\r\nexport default (state = defaultState,  { type, payload }) => {\r\n\tif(type === MUTATIONS.CATALOGS_SAVE) {\r\n\t\tconsole.log('payload', payload)\r\n\t\tconst { curNode, data, bookId } = payload\r\n\t\tconst key = curNode.parentId === 'root' ? bookId+'_root' : curNode.parentId\r\n\t\tconst list = {\r\n\t\t\t...{ [key]: {\r\n\t\t\t\t\t...state.list[curNode.parentId],\r\n\t\t\t\t\tupdateTime: (new Date()).getTime(),\r\n\t\t\t\t\tchildNodes: data\r\n\t\t\t\t} }\r\n\t\t}\r\n\t\tdata.forEach((item) => {\r\n\t\t\tlist[item._id] = {\r\n\t\t\t\t...item\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tlist: {\r\n\t\t\t\t...state.list,\r\n\t\t\t\t...list\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif(type === MUTATIONS.CATALOGS_CUR_SAVE) {\r\n\t\tconst id = payload\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tcurCatalog: id\r\n\t\t}\r\n\t}\r\n\tif(type === MUTATIONS.CATALOGS_TEMPLATE_CREATE) {\r\n\t\tconst id = payload\r\n\t\tconst newDir = {\r\n\t\t\tname: '新建文件夹',\r\n\t\t\tisNew: true,\r\n\t\t\tparentId: id\r\n\t\t}\r\n\t\t// 将临时目录插入到目标文件夹最前面，并更新state\r\n\t\tconst getCatalog = state.list[id] ? state.list[id] : []\r\n\t\tconst addCatalog = [ newDir, ...getCatalog ]\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tlist: {\r\n\t\t\t\t...state.list,\r\n\t\t\t\t...{ [id]: addCatalog }\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif(type === MUTATIONS.CATALOGS_OPEN_TOGGLE) {\r\n\t\tconst  { id, force } = payload\r\n\t\tlet isOpen = [ ...state.isOpen ]\r\n\t\tconst findInd = isOpen.indexOf(id)\r\n\t\tif(findInd < 0) {\r\n\t\t\tisOpen = [ ...isOpen, id]\r\n\t\t} else if(!force && findInd > -1 ){\r\n\t\t\tisOpen.splice(findInd, 1)\r\n\t\t}\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tisOpen\r\n\t\t}\r\n\t}\r\n\tif(type === MUTATIONS.CATALOGS_OPEN_RESET) {\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tisOpen: []\r\n\t\t}\r\n\t}\r\n\treturn state\r\n}\r\n\r\nexport function CATALOGS_GET( params = {}) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst rootState = getState()\r\n\t\tconst state = rootState.catalogs\r\n\t\tparams.parentId = params.parentId || rootState.books.curBook+'_root'\r\n\t\tparams.bookId = params.bookId || rootState.books.curBook\r\n\t\tlet { force = false, parentId, bookId} = params\r\n\t\tif(!force && state.list[params.parentId] && state.list[params.parentId].childNodes) {\r\n\t\t\treturn {\r\n\t\t\t\terr: null,\r\n\t\t\t\tdata: state.list[params.parentId]\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst result = await fetch({\r\n\t\t\turl: '/api/catalogs',\r\n\t\t\tdata: {\r\n\t\t\t\tparentId: parentId.indexOf('root') > 0 ?  'root' : parentId,\r\n\t\t\t\tbookId\r\n\t\t\t}\r\n\t\t})\r\n\t\tconst { err, data } = result\r\n\t\tif(!err) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: MUTATIONS.CATALOGS_SAVE,\r\n\t\t\t\tpayload: { curNode: params, data: data, bookId: rootState.books.curBook }\r\n\t\t\t})\r\n\t\t\tdata.forEach(item => {\r\n\t\t\t\tif(item.hasChild) {\r\n\t\t\t\t\tCATALOGS_GET(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tparentId: item._id,\r\n\t\t\t\t\t\t\tbookId: item.bookId,\r\n\t\t\t\t\t\t\tforce\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn result\r\n\t}\r\n}\r\n\r\nexport function CATALOGS_CUR_SAVE(data) {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: MUTATIONS.CATALOGS_CUR_SAVE,\r\n\t\t\tpayload: data\r\n\t\t})\r\n\t}\r\n\r\n}\r\n\r\n","import { combineReducers } from 'redux'\r\nconst files = require.context('.', false, /\\.js$/)\r\nconst modules = {}\r\n\r\nfiles.keys().forEach((key) => {\r\n\tif (key === './index.js') return\r\n\tmodules[key.replace(/(\\.\\/|\\.js)/g, '')] = files(key).default\r\n})\r\n\r\nexport default combineReducers(modules)\r\n","import fetch from '../../utils/fetch/fetch.js'\r\nimport constKey from '../../utils/const.js'\r\nimport * as MUTATIONS from \"../const/mutaions\";\r\nconst defaultState = {\r\n\tuserInfo: {},\r\n\tcurUserInfo: {},\r\n\tuserInfoStatus: '' // info:个人信息，modify:修改，reg:注册，login：登录\r\n}\r\n\r\n\r\nexport default (state = defaultState,  { type, payload }) => {\r\n\tif(type === MUTATIONS.USER_SAVE) {\r\n\t\tconst  data = payload\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tuserInfo: {\r\n\t\t\t\t...data\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif(type === MUTATIONS.CUR_USER_INFO_SAVE) {\r\n\t\tconst info = payload\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tcurUserInfo: { ...info }\r\n\t\t}\r\n\t}\r\n\tif(type === MUTATIONS.CUR_USER_LAYOUT_SAVE) {\r\n\t\tconst info = payload\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tuserInfoStatus: { ...info }\r\n\t\t}\r\n\t}\r\n\treturn state\r\n}\r\n\r\nexport function login(data) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst result = await fetch({\r\n\t\t\turl: '/api/login',\r\n\t\t\tmethod: 'post',\r\n\t\t\tdata,\r\n\t\t\tnotAlert: true\r\n\t\t})\r\n\t\tif(!result.err) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: MUTATIONS.USER_SAVE,\r\n\t\t\t\tpayload: result.data\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn result\r\n\t}\r\n}\r\n\r\nexport function USER_INFO_GET(data) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst rootState = getState()\r\n\t\tconst state = rootState.user\r\n\t\tif(state.userInfo.username) {\r\n\t\t\treturn {\r\n\t\t\t\terr: null,\r\n\t\t\t\tdata: state.userInfo\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst result = await fetch({\r\n\t\t\turl: '/api/getUserInfo'\r\n\t\t})\r\n\t\tif(!result.err) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: MUTATIONS.USER_SAVE,\r\n\t\t\t\tpayload: result.data\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn result\r\n\t}\r\n}\r\n","const HOST = '67.209.187.22'\nconst obj = {\n\tdevHost: '10.5.23.29:3001',\n\tproHost: HOST,\n\tmockHost: `http://${HOST}:3000`\n}\nexport default {\n\tbase: obj\n}\n","var map = {\n\t\"./books.js\": 29,\n\t\"./catalogs.js\": 30,\n\t\"./index.js\": 34,\n\t\"./notes.js\": 23,\n\t\"./user.js\": 35\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 67;"],"sourceRoot":""}